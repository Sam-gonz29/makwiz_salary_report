{
 "add_total_row": 1, 
 "apply_user_permissions": 1, 
 "creation": "2017-06-05 12:10:17.874178", 
 "disabled": 0, 
 "docstatus": 0, 
 "doctype": "Report", 
 "idx": 0, 
 "is_standard": "Yes", 
 "modified": "2020-04-14 10:19:15.786767", 
 "modified_by": "Administrator", 
 "module": "Salary Report", 
 "name": "NOMINA con deducciones", 
 "owner": "Administrator", 
 "query": "SELECT\n\t`tabSalary Slip`.cedula_o_pasaporte AS `CEDULA`,\n\t`tabSalary Slip`.posting_date AS \"FECHA:Date:70\",\n\t`tabSalary Slip`.employee_name AS \"NOMBRE:Read Only:100\",\n\t\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * `tabSalary Slip`.salario_base,`tabSalary Slip`.salario_base) AS `Salario Base:Float:100`,\n\n\t`tabSalary Slip`.tasa_de_cambio AS \"tasa\",\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * MAX(IF (salary_component = 'US Salario Quincenal',`tabSalary Detail`.amount,\"0\")) ,MAX(IF (salary_component = 'Salario Quincenal',`tabSalary Detail`.amount,\"0\")))\n\tAS `Salario Quincena:Float:100`,\n\t\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\tSUM(CASE WHEN \n\tsalary_component = 'US GRATIFICACION' OR\n\tsalary_component = 'US Retroactivo' OR\t\n\tsalary_component = 'US Ingresos Extraordinarios Cotizables Actual Quincena' OR\n\tsalary_component = 'US Otros Ingresos Extraordinarios Cotizables' OR\n\tsalary_component = 'US Otros Ingresos Extraordinarios No cotizables' OR\n\tsalary_component = 'US Ingresos Extraordinarios Cotizables Quincena Anterior' OR\n\tsalary_component = 'US Ingreso Extrordinarios Pagados Quincena Anterior' OR\n\tsalary_component = 'US Ingresos Extraordinarios No Cotizables' OR\n\tsalary_component = 'US Cesant\u00eda' OR\n\tsalary_component = 'US Vacaciones' OR\n\tsalary_component = 'US Pre-aviso' OR\n\tsalary_component = 'US Horas Extras Domingos y Feriados' OR\n\tsalary_component = 'US Horas Extras Nocturnas' OR\n\tsalary_component = 'US Horas Extras Diurnas' OR\n\tsalary_component = 'US Bonificacion' OR\n\tsalary_component = 'US Bonos por Desempe\u00f1o' OR\n\tsalary_component = 'US Comisiones' OR\n\tsalary_component = 'US Salario de Navidad' OR\n\tsalary_component = 'US Ingresos Extraordinarios 1ra quincena' OR\n\tsalary_component = 'US Ingresos Extraordinarios 2da quincena' OR\n\t\n\tsalary_component = 'US Ingresos Extraordinarios' OR\n\n\tsalary_component = 'US Comisiones 1ra Quincena' OR\n\tsalary_component = 'US Comisiones 2da Quincena' OR\n\tsalary_component = 'US Horas Extras Diurnas 1ra quincena' OR\n\tsalary_component = 'US Horas Extras Diurnas 2da quincena' OR\n\tsalary_component = 'US Horas Extras Nocturnas 1ra quincena' OR\n\tsalary_component = 'US Horas Extras Nocturnas 2da quincena' OR\n\tsalary_component = 'US Bonificacion 1ra Quincena' OR\n\tsalary_component = 'US Bonificacion 2da Quincena' OR\n\tsalary_component = 'US Vacaciones 1ra Quincena' OR\n\tsalary_component = 'US Vacaciones 2da Quincena' OR\n\tsalary_component = 'US Bonos por Desempe\u00f1o 1ra Quincena' OR\n\tsalary_component = 'US Bonos por Desempe\u00f1o 2da Quincena' OR\n\tsalary_component = 'US Retroactivo 1ra Quincena' OR\n\tsalary_component = 'US Retroactivo 2da Quincena'\n\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t),\n\tSUM(CASE WHEN \n\tsalary_component = 'GRATIFICACION' OR\n\tsalary_component = 'Retroactivo' OR\t\n\tsalary_component = 'Ingresos Extraordinarios Cotizables Actual Quincena' OR\n\tsalary_component = 'Otros Ingresos Extraordinarios Cotizables' OR\n\tsalary_component = 'Otros Ingresos Extraordinarios No cotizables' OR\n\tsalary_component = 'Ingresos Extraordinarios Cotizables Quincena Anterior' OR\n\tsalary_component = 'Ingreso Extrordinarios Pagados Quincena Anterior' OR\n\tsalary_component = 'Ingresos Extraordinarios No Cotizables' OR\n\tsalary_component = 'Cesant\u00eda' OR\n\tsalary_component = 'Vacaciones' OR\n\tsalary_component = 'Pre-aviso' OR\n\tsalary_component = 'Horas Extras Domingos y Feriados' OR\n\tsalary_component = 'Horas Extras Nocturnas' OR\n\tsalary_component = 'Horas Extras Diurnas' OR\n\tsalary_component = 'Bonificacion' OR\n\tsalary_component = 'Bonos por Desempe\u00f1o' OR\n\tsalary_component = 'Comisiones' OR\n\tsalary_component = 'Salario de Navidad' OR\n\tsalary_component = 'Ingresos Extraordinarios 1ra quincena' OR\n\n\tsalary_component = 'Ingresos Extraordinarios 2da quincena' OR\n\tsalary_component = 'Ingresos Extraordinarios' OR\n\n\tsalary_component = 'Comisiones 1ra Quincena' OR\n\tsalary_component = 'Comisiones 2da Quincena' OR\n\tsalary_component = 'Horas Extras Diurnas 1ra Quincena' OR\n\tsalary_component = 'Horas Extras Diurnas 2da Quincena' OR\n\tsalary_component = 'Horas Extras Nocturnas 1ra Quincena' OR\n\tsalary_component = 'Horas Extras Nocturnas 2da Quincena' OR\n\tsalary_component = 'Bonificacion 1ra Quincena' OR\n\tsalary_component = 'Bonificacion 2da Quincena' OR\n\tsalary_component = 'Vacaciones 1ra Quincena' OR\n\tsalary_component = 'Vacaciones 2da Quincena' OR\n\tsalary_component = 'Bonos por Desempe\u00f1o 1ra Quincena' OR\n\tsalary_component = 'Bonos por Desempe\u00f1o 2da Quincena' OR\n\tsalary_component = 'Retroactivo 1ra Quincena' OR\n\tsalary_component = 'Retroactivo 2da Quincena'\n\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t)\n\t) AS `Otros Ingresos:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Seguro Familiar de Salud 01 1ra quincena',`tabSalary Detail`.amount,\n\t\t(IF (salary_component = 'US Seguro Familiar de Salud 01 2da quincena',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Seguro Familiar de Salud 02 1ra quincena',`tabSalary Detail`.amount,\n\t\t\t\t(IF (salary_component = 'US Seguro Familiar de Salud 02 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t(IF (salary_component = 'US Seguro Familiar de Salud 01 Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF (salary_component = 'US Seguro Familiar de Salud 02 Total',`tabSalary Detail`.amount,\"0\")))))))))))),2),\n\t\t\t\t\tROUND(MAX(IF (salary_component = 'Seguro Familiar de Salud 01 1era quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF (salary_component = 'Seguro Familiar de Salud 02 1ra quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t(IF (salary_component = 'Seguro Familiar de Salud(02) 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t(IF (salary_component = 'Seguro Familiar de Salud(01) 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t(IF (salary_component = 'Seguro Familiar de Salud 01 Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t\t(IF (salary_component = 'Seguro Familiar de Salud 02 Total',`tabSalary Detail`.amount,\"0\")))))))))))),2))\n\tAS `SFS empleado:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Administracion de Fondo de Pensiones 01 1ra quincena',`tabSalary Detail`.amount,\n\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones 01 2da quincena',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones 02 1ra quincena',`tabSalary Detail`.amount,\n\t\t\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones 02 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones 02 Total',`tabSalary Detail`.amount,\"0\")))))))))))),2),\n\t\t\t\t\tROUND(MAX(IF (salary_component = 'Administracion De Fondo De Pensiones 01 1era quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF (salary_component = 'Administracion de Fondos de Pensiones(01) 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t(IF (salary_component = 'Administracion de Fondo de Pensiones 02 1ra quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t(IF (salary_component = 'Administracion de Fondo de Pensiones(02) 2da quincena',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t(IF (salary_component = 'Administracion de Fondos de Pensiones 01 Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t\t(IF (salary_component = 'Administracion de Fondos de Pensiones 02 Total',`tabSalary Detail`.amount,\"0\")))))))))))),2))\n\tAS `AFP empleado:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Impuesto Sobre la Renta(01)', `tabSalary Detail`.amount,\n\t\tIF (salary_component = 'US Impuesto Sobre la Renta(02)',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Impuesto Sobre la Renta(03)',`tabSalary Detail`.amount,\n\t\t\t\t(IF(salary_component = 'US Impuesto Sobre la Renta(04)',`tabSalary Detail`.amount,\n\t\t\t\t\t(IF(salary_component = 'US QA Impuesto Sobre La Renta 02',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF(salary_component = 'US QA Impuesto Sobre la Renta 03',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t(IF(salary_component = 'US QA Impuesto Sobre la Renta 04',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t(IF(salary_component = 'US Impuesto Sobre la Renta Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t(IF(salary_component = 'US Impuesto Sobre la Renta 02 Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t\t(IF(salary_component = 'US Impuesto Sobre la Renta 03 Total',`tabSalary Detail`.amount,\"0\"))))))))))))))))))),2), ROUND(MAX(IF (salary_component = 'Impuesto Sobre la Renta(01)', `tabSalary Detail`.amount,\n\t\tIF (salary_component = 'Impuesto Sobre la Renta(02)',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'Impuesto Sobre la Renta(03)',`tabSalary Detail`.amount,\n\t\t\t\t(IF(salary_component = 'Impuesto Sobre la Renta(04)',`tabSalary Detail`.amount,\n\t\t\t\t\t(IF(salary_component = 'QA Impuesto Sobre la Renta 02',`tabSalary Detail`.amount,\n\t\t\t\t\t\t(IF(salary_component = 'QA Impuesto Sobre la Renta 03',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t(IF(salary_component = 'QA Impuesto Sobre la Renta 04',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t(IF(salary_component = 'Impuesto Sobre la Renta(02) Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t(IF(salary_component = 'Impuesto Sobre la Renta(03) Total',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t\t(IF(salary_component = 'Impuesto Sobre la Renta(04) Total',`tabSalary Detail`.amount,\"0\"))))))))))))))))))),2))\n\tAS `ISR:Float:100`,\n\t\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Seguro M\u00e9dico Complementario' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Seguro M\u00e9dico Complementario' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Seguro M\u00e9dico Complementario:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Prestamos para estudios' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Prestamos para estudios' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Prestamos para estudios:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Deduccion de prestamos' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Deduccion de prestamos' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Deduccion de prestamos:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Seguro B\u00e1sico Dependiente' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Seguro B\u00e1sico Dependiente' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Seguro B\u00e1sico Dependiente:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Deducciones Extraordinarias' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Deducciones Extraordinarias' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Deducciones Extraordinarias:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Provisi\u00f3n Salario 13' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Provisi\u00f3n Salario 13' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Provisi\u00f3n Salario 13:Float:100`,\n\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio *\tSUM(CASE WHEN salary_component = 'US Deducciones Quincena Anterior' \n\t THEN `tabSalary Detail`.amount ELSE 0 END),SUM(CASE WHEN salary_component = 'Deducciones Quincena Anterior' \n\t THEN `tabSalary Detail`.amount ELSE 0 END)) AS `Deducciones Quincena Anterior:Float:100`,\n\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\t \tSUM(\n\t \t\tCASE WHEN \n\t \t\tsalary_component = 'US Seguro M\u00e9dico Complementario' OR\t\t\n\t\t\tsalary_component = 'US Prestamos para estudios' OR\n\t\t\tsalary_component = 'US Deduccion de prestamos' OR\n\t\t\tsalary_component = 'US Seguro B\u00e1sico Dependiente' OR\n\t\t \tsalary_component = 'US Deducciones Extraordinarias' OR\n\t\t \tsalary_component = 'US Comida' OR\n\t\t \tsalary_component = 'US Provisi\u00f3n Salario 13' OR\n\t\t \tsalary_component = 'US Deducciones Quincena Anterior' OR\n\t\t \tsalary_component = 'US Aporte voluntario AFP'\n\t \t\tTHEN\n\t \t\t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t),\n\t \tSUM(CASE WHEN \n\t \t\tsalary_component = 'Seguro M\u00e9dico Complementario' OR\t\t\n\t \t\tsalary_component = 'Prestamos para estudios' OR\t\t\n\t \t\tsalary_component = 'Deduccion de prestamos' OR\t\t\n\t\t\tsalary_component = 'Seguro B\u00e1sico Dependiente' OR\n\t\t \tsalary_component = 'Deducciones Extraordinarias' OR\n\t\t \tsalary_component = 'Prestamos para estudios' OR\n\t\t \tsalary_component = 'Comida' OR\n\t\t \tsalary_component = 'Provisi\u00f3n Salario 13' OR\n\t\t \tsalary_component = 'Deducciones Quincena Anterior' OR\n\t\t \tsalary_component = 'Aporte Voluntario AFP'\n\t \t\tTHEN\n\t \t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t)\n\t )\n\t AS `TOTAL DEDUCCIONES:Float:100`,\n\n\n\t`tabSalary Slip`.total_principal_amount AS \"PRESTAMO:Float:100\",\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * `tabSalary Slip`.net_pay,`tabSalary Slip`.net_pay)\n\t AS \"NETO A PAGAR:Float:100\"\n\t\n\tFROM\n\t((`tabSalary Slip`\n\tINNER JOIN `tabSalary Detail` ON `tabSalary Slip`. NAME = `tabSalary Detail`.parent)\n\tINNER JOIN tabEmployee ON `tabSalary Slip`.employee = tabEmployee. NAME)\nWHERE\n`tabSalary Detail`.parenttype = \"Salary Slip\"\nAND `tabSalary Detail`.parent = `tabSalary Slip`.`name`\nAND `tabSalary Slip`.`status` != \"Cancelled\"\nAND `tabSalary Slip`.start_date between %(from_date)s and %(to_date)s\nAND `tabSalary Slip`.company = %(company)s\nGROUP BY\n\t`tabSalary Detail`.parent\nORDER BY\n\t`tabSalary Slip`.employee_name", 
 "ref_doctype": "Salary Slip", 
 "report_name": "NOMINA con deducciones", 
 "report_type": "Query Report", 
 "roles": [
  {
   "role": "HR User"
  }, 
  {
   "role": "HR Manager"
  }, 
  {
   "role": "Employee"
  }
 ]
}