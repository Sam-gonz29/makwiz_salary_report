{
 "add_total_row": 1, 
 "apply_user_permissions": 1, 
 "creation": "2018-07-24 17:22:46.048182", 
 "disabled": 0, 
 "docstatus": 0, 
 "doctype": "Report", 
 "idx": 0, 
 "is_standard": "Yes", 
 "letter_head": "Mathiesen", 
 "modified": "2019-10-30 11:55:45.254991", 
 "modified_by": "Administrator", 
 "module": "Salary Report", 
 "name": "NOMINA con deducciones.", 
 "owner": "Administrator", 
 "query": "SELECT\n\t`tabSalary Slip`.cedula_o_pasaporte AS `CEDULA`,\n\t`tabSalary Slip`.posting_date AS \"FECHA:Date:70\",\n\t`tabSalary Slip`.employee_name AS \"NOMBRE:Read Only:100\",\n\t\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * `tabSalary Slip`.salario_base,`tabSalary Slip`.salario_base) AS `SALARIO BASE:Float:100`,\n\n\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\tSUM(CASE WHEN \n\tsalary_component = 'US Retroactivo' OR\t\n\tsalary_component = 'US Ingresos Extraordinarios Cotizables Actual Quincena' OR\n\tsalary_component = 'US Otros Ingresos Extraordinarios Cotizables' OR\n\tsalary_component = 'US Otros Ingresos Extraordinarios No cotizables' OR\n\tsalary_component = 'US Ingresos Extraordinarios Cotizables Quincena Anterior' OR\n\tsalary_component = 'US Ingreso Extrordinarios Pagados Quincena Anterior' OR\n\tsalary_component = 'US Ingresos Extraordinarios No Cotizables' OR\n\tsalary_component = 'US Cesant\u00eda' OR\n\tsalary_component = 'US Vacaciones' OR\n\tsalary_component = 'US Pre-aviso' OR\n\tsalary_component = 'US Horas Extras Domingos y Feriados' OR\n\tsalary_component = 'US Horas Extras Nocturnas' OR\n\tsalary_component = 'US Horas Extras Diurnas' OR\n\tsalary_component = 'US Bonificacion' OR\n\tsalary_component = 'US Bonos por Desempe\u00f1o' OR\n\tsalary_component = 'US Comisiones' OR\n\tsalary_component = 'US Salario de Navidad'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t),\n\tSUM(CASE WHEN \n\tsalary_component = 'Retroactivo' OR\t\n\tsalary_component = 'Ingresos Extraordinarios Cotizables Actual Quincena' OR\n\tsalary_component = 'Otros Ingresos Extraordinarios Cotizables' OR\n\tsalary_component = 'Otros Ingresos Extraordinarios No cotizables' OR\n\tsalary_component = 'Ingresos Extraordinarios Cotizables Quincena Anterior' OR\n\tsalary_component = 'Ingreso Extrordinarios Pagados Quincena Anterior' OR\n\tsalary_component = 'Ingresos Extraordinarios No Cotizables' OR\n\tsalary_component = 'Cesant\u00eda' OR\n\tsalary_component = 'Vacaciones' OR\n\tsalary_component = 'Pre-aviso' OR\n\tsalary_component = 'Horas Extras Domingos y Feriados' OR\n\tsalary_component = 'Horas Extras Nocturnas' OR\n\tsalary_component = 'Horas Extras Diurnas' OR\n\tsalary_component = 'Bonificacion' OR\n\tsalary_component = 'Bonos por Desempe\u00f1o' OR\n\tsalary_component = 'Comisiones' OR\n\tsalary_component = 'Salario de Navidad'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t)\n\t) AS `OTROS INGRESOS:Float:100`,\n\n\n\n\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Seguro Familiar de Salud(01)',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Seguro Familiar de Salud(02)',`tabSalary Detail`.amount,\"0\")))),2),MAX(IF (salary_component = 'Seguro Familiar de Salud(01)',`tabSalary Detail`.amount,\n\t\t(IF (salary_component = 'Seguro Familiar de Salud(02)',`tabSalary Detail`.amount,\"0\")))))\n\t AS `SFS EMPLEADO:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Administracion de Fondos de Pensiones(01)',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Administracion de Fondo de Pensiones(02)',`tabSalary Detail`.amount,\"0\")))),2), MAX(IF (salary_component = 'Administracion de Fondos de Pensiones(01)',`tabSalary Detail`.amount,\n\t\t(IF (salary_component = 'Administracion de Fondo de Pensiones(02)',`tabSalary Detail`.amount,\"0\")))))\n\t AS `AFP EMPLEADO:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\tSUM(CASE WHEN \n\tsalary_component = 'US Seguro Basico Dependiente'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t),\n\tSUM(CASE WHEN \n\tsalary_component = 'Seguro Basico Dependiente'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t)\n\t) AS `SEGURO BASICO DEPENDIENTE:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * ROUND(MAX(IF (salary_component = 'US Impuesto Sobre la Renta(01)',`tabSalary Detail`.amount,\n\t\t\t(IF (salary_component = 'US Impuesto Sobre la Renta(02)',`tabSalary Detail`.amount,\n\t\t\t\t(IF (salary_component = 'US Impuesto Sobre la Renta(03)',`tabSalary Detail`.amount,\n\t\t\t\t\t(IF (salary_component = 'US Impuesto Sobre la Renta(04)',`tabSalary Detail`.amount,\"0\")))))))),2), ROUND(MAX(IF (salary_component = 'Impuesto Sobre la Renta(01)',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t(IF (salary_component = 'Impuesto Sobre la Renta(02)',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t(IF (salary_component = 'Impuesto Sobre la Renta(03)',`tabSalary Detail`.amount,\n\t\t\t\t\t\t\t\t\t(IF (salary_component = 'Impuesto Sobre la Renta(04)',`tabSalary Detail`.amount,\"0\")))))))),2))\n\t AS `ISR:Float:100`,\n\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\tSUM(CASE WHEN \n\tsalary_component = 'US Prestamo empleado'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t),\n\tSUM(CASE WHEN \n\tsalary_component = 'Prestamo empleado'\n\tTHEN\n\t`tabSalary Detail`.amount\n\tELSE\n\t0\n\tEND\n\t)\n\t) AS `PRESTAMOS:Float:100`,\n\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\t \tSUM(\n\t \t\tCASE WHEN \n\t \t\tsalary_component = 'US Deducciones Extraordinarias' \t\t\n\t \t\tTHEN\n\t \t\t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t),\n\t \tSUM(CASE WHEN \n\t \t\tsalary_component = 'Deducciones Extraordinarias'\t\t\n\t \t\tTHEN\n\t \t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t)\n\t )\n\t AS `DEDUCCIONES EXTRAORDINARIAS:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\t \tSUM(\n\t \t\tCASE WHEN \n\t \t\tsalary_component = 'Avance de Salario' \t\t\n\t \t\tTHEN\n\t \t\t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t),\n\t \tSUM(CASE WHEN \n\t \t\tsalary_component = 'Avance de Salario'\t\t\n\t \t\tTHEN\n\t \t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t)\n\t )\n\t AS `AVANCE DE SALARIO:Float:100`,\n\t\n\t\t IF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * \n\t \tSUM(\n\t \t\tCASE WHEN \n\t \t\tsalary_component = 'US Avance de Salario' OR\t\t\n\t \t\tsalary_component = 'US Seguro M\u00e9dico Complementario' OR\t\t\n\t\t\tsalary_component = 'US Prestamos para estudios' OR\n\t\t\tsalary_component = 'US Seguro B\u00e1sico Dependiente' OR\n\t\t \tsalary_component = 'US Deducciones Extraordinarias' OR\n\t\t \tsalary_component = 'US Aporte voluntario AFP' OR\n\n\t\t \tsalary_component = 'US Impuesto Sobre la Renta(01)' OR\n\t\t \tsalary_component = 'US Impuesto Sobre la Renta(02)' OR\n\t\t \tsalary_component = 'US Impuesto Sobre la Renta(03)' OR\n\t\t \tsalary_component = 'US Impuesto Sobre la Renta(04)' OR\n\t \t\tsalary_component = 'US Prestamo empleado' OR\t\t\n\n\t\t \tsalary_component = 'US Administracion de Fondos de Pensiones(01)' OR\n\t\t \tsalary_component = 'US Administracion de Fondo de Pensiones(02)' OR\n\n\t\t \tsalary_component = 'US Seguro Familiar de Salud(01)' OR\n\t\t \tsalary_component = 'US Seguro Familiar de Salud(02)'\n\n\n\n\t \t\tTHEN\n\t \t\t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t),\n\t \tSUM(CASE WHEN \n\t \t\tsalary_component = 'Avance de Salario' OR\t\t\n\t \t\tsalary_component = 'Seguro M\u00e9dico Complementario' OR\t\t\n\t \t\tsalary_component = 'Prestamos para estudios' OR\t\t\n\t \t\tsalary_component = 'Deduccion de prestamos' OR\t\t\n\t\t\tsalary_component = 'Seguro B\u00e1sico Dependiente' OR\n\t\t \tsalary_component = 'Deducciones Extraordinarias' OR\n\t\t \tsalary_component = 'Aporte Voluntario AFP' OR\n\n\t\t \tsalary_component = 'Impuesto Sobre la Renta(01)' OR\n\t\t \tsalary_component = 'Impuesto Sobre la Renta(02)' OR\n\t\t \tsalary_component = 'Impuesto Sobre la Renta(03)' OR\n\t\t \tsalary_component = 'Impuesto Sobre la Renta(04)' OR\n\t \t\tsalary_component = 'Prestamo empleado' OR\t\t\n\n\t\t \tsalary_component = 'Administracion de Fondos de Pensiones(01)' OR\n\t\t \tsalary_component = 'Administracion de Fondo de Pensiones(02)' OR\n\n\t\t \tsalary_component = 'Seguro Familiar de Salud(01)' OR\n\t\t \tsalary_component = 'Seguro Familiar de Salud(02)'\n\t \t\tTHEN\n\t \t\t`tabSalary Detail`.amount\n\t \t\tELSE\n\t \t\t\t0\n\t \t\tEND\n\t \t\t)\n\t )\n\t AS `TOTAL DEDUCCIONES:Float:100`,\n\n\tIF (`tabSalary Slip`.tasa_de_cambio != 0,`tabSalary Slip`.tasa_de_cambio * `tabSalary Slip`.net_pay,`tabSalary Slip`.net_pay)\n\t AS \"NETO A PAGAR:Float:100\"\n\t\n\tFROM\n\t((`tabSalary Slip`\n\tINNER JOIN `tabSalary Detail` ON `tabSalary Slip`. NAME = `tabSalary Detail`.parent)\n\tINNER JOIN tabEmployee ON `tabSalary Slip`.employee = tabEmployee. NAME)\nWHERE\n`tabSalary Detail`.parenttype = \"Salary Slip\"\nAND `tabSalary Detail`.parent = `tabSalary Slip`.`name`\nAND `tabSalary Slip`.`status` != \"Cancelled\"\nAND `tabSalary Slip`.start_date between %(from_date)s and %(to_date)s\nAND `tabSalary Slip`.company = %(company)s\nGROUP BY\n\t`tabSalary Detail`.parent\nORDER BY\n\t`tabSalary Slip`.employee_name", 
 "ref_doctype": "Salary Slip", 
 "report_name": "NOMINA con deducciones.", 
 "report_type": "Query Report", 
 "roles": [
  {
   "role": "Asistente de Contabilidad"
  }, 
  {
   "role": "HR User"
  }, 
  {
   "role": "HR Manager"
  }, 
  {
   "role": "Employee"
  }
 ]
}